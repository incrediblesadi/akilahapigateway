# Akila API Gateway - Architecture & Features Matrix

**Version:** 1.0  
**Last Updated:** December 16, 2025

---

## System Architecture Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         CLIENT LAYER                             â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  Web App â”‚  â”‚  Mobile  â”‚  â”‚   CLI    â”‚  â”‚  CI/CD   â”‚        â”‚
â”‚  â”‚          â”‚  â”‚   App    â”‚  â”‚   Tool   â”‚  â”‚ Pipeline â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜        â”‚
â”‚       â”‚             â”‚             â”‚             â”‚                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚             â”‚             â”‚             â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    INTERNET / HTTPS                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  GOOGLE CLOUD PLATFORM                           â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              CLOUD RUN (Auto-Scaling)                      â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  URL: akilahapigateway-858627689875.us-central1.run.app   â”‚ â”‚
â”‚  â”‚  Region: us-central1                                       â”‚ â”‚
â”‚  â”‚  Container: gcr.io/akilahstack/akilahapigateway           â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚         Docker Container (Node:18-slim)              â”‚ â”‚ â”‚
â”‚  â”‚  â”‚                                                       â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚       EXPRESS.JS APPLICATION                â”‚    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚                                              â”‚    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚      API GATEWAY LAYER                 â”‚ â”‚    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚                                         â”‚ â”‚    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â€¢ Request Parsing (express.json())   â”‚ â”‚    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â€¢ Route Matching                      â”‚ â”‚    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â€¢ Response Formatting                 â”‚ â”‚    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â€¢ Error Handling                      â”‚ â”‚    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚                     â”‚                         â”‚    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚                                         â”‚ â”‚    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚      ROUTE LOADER (routes/loader.js)   â”‚ â”‚    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚                                         â”‚ â”‚    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â””â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚     â”‚             â”‚            â”‚            â”‚    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”Œâ”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â–¼â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ GitHub  â”‚  â”‚ Notion â”‚  â”‚  Firebase  â”‚  â”‚    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ Routes  â”‚  â”‚ Routes â”‚  â”‚   Routes   â”‚  â”‚    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ (10)    â”‚  â”‚  (5)   â”‚  â”‚    (2)     â”‚  â”‚    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â””â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚     â”‚             â”‚            â”‚            â”‚    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”Œâ”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚                                        â”‚ â”‚    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚      SDK INTEGRATION LAYER            â”‚ â”‚    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚                                        â”‚ â”‚    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”â”‚ â”‚    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”‚ Octokit  â”‚ â”‚  Notion  â”‚ â”‚Firebaseâ”‚â”‚ â”‚    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”‚  Client  â”‚ â”‚   SDK    â”‚ â”‚  Admin â”‚â”‚ â”‚    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚ â”‚    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚                                        â”‚ â”‚    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚                                              â”‚    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚      UTILITY LAYER                     â”‚ â”‚    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚                                         â”‚ â”‚    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â€¢ Session Management                  â”‚ â”‚    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â€¢ Libsodium Encryption                â”‚ â”‚    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â€¢ Luxon Date/Time (EST)               â”‚ â”‚    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â€¢ Environment Config                  â”‚ â”‚    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â”‚                                              â”‚    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚                                                       â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              CLOUD INFRASTRUCTURE                           â”‚ â”‚
â”‚  â”‚                                                              â”‚ â”‚
â”‚  â”‚  â€¢ Container Registry (gcr.io)                              â”‚ â”‚
â”‚  â”‚  â€¢ Cloud Logging (logging.logWriter)                        â”‚ â”‚
â”‚  â”‚  â€¢ Cloud Build (builds.editor)                              â”‚ â”‚
â”‚  â”‚  â€¢ Service Account (858627689875-compute@...)               â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                                   â”‚                â”‚
        â–¼                                   â–¼                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    GITHUB     â”‚              â”‚     NOTION     â”‚  â”‚    FIREBASE    â”‚
â”‚               â”‚              â”‚                â”‚  â”‚                â”‚
â”‚ â€¢ REST API    â”‚              â”‚  â€¢ REST API    â”‚  â”‚ â€¢ Realtime DB  â”‚
â”‚ â€¢ GraphQL API â”‚              â”‚  â€¢ SDK         â”‚  â”‚ â€¢ Admin SDK    â”‚
â”‚ â€¢ OAuth       â”‚              â”‚  â€¢ OAuth       â”‚  â”‚                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## CI/CD Pipeline Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       GITHUB REPOSITORY                          â”‚
â”‚                   incrediblesadi/akilahapigateway                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Git Push to     â”‚
                    â”‚   'main' branch   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    GITHUB ACTIONS WORKFLOWS                      â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   deploy.yml   â”‚  â”‚   test.yml     â”‚  â”‚ env-sync.yml     â”‚  â”‚
â”‚  â”‚                â”‚  â”‚                â”‚  â”‚                  â”‚  â”‚
â”‚  â”‚ 1. Checkout    â”‚  â”‚ 1. Checkout    â”‚  â”‚ 1. Parse .env    â”‚  â”‚
â”‚  â”‚ 2. GCP Auth    â”‚  â”‚ 2. npm install â”‚  â”‚ 2. Encrypt vals  â”‚  â”‚
â”‚  â”‚ 3. Deploy to   â”‚  â”‚ 3. Run Jest    â”‚  â”‚ 3. Update GitHub â”‚  â”‚
â”‚  â”‚    Cloud Run   â”‚  â”‚                â”‚  â”‚    Secrets       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚           â”‚                   â”‚                     â”‚           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚generate-repo-   â”‚ â”‚deploy-auto-tag â”‚ â”‚env-to-secrets.ymlâ”‚  â”‚
â”‚  â”‚map.yml          â”‚ â”‚                â”‚ â”‚                  â”‚  â”‚
â”‚  â”‚                 â”‚ â”‚ 1. Check deployâ”‚ â”‚ 1. Convert vars  â”‚  â”‚
â”‚  â”‚ 1. Scan repo    â”‚ â”‚ 2. Create tag  â”‚ â”‚ 2. Encrypt w/    â”‚  â”‚
â”‚  â”‚ 2. Generate MD  â”‚ â”‚ 3. Push tag    â”‚ â”‚    libsodium     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    GOOGLE CLOUD BUILD                            â”‚
â”‚                                                                   â”‚
â”‚  1. Pull Docker base image (node:18-slim)                        â”‚
â”‚  2. Copy package.json and install dependencies                   â”‚
â”‚  3. Copy application source code                                 â”‚
â”‚  4. Build container image                                        â”‚
â”‚  5. Push to gcr.io/akilahstack/akilahapigateway                 â”‚
â”‚  6. Deploy to Cloud Run with service account                     â”‚
â”‚  7. Configure auto-scaling and networking                        â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      PRODUCTION DEPLOYMENT                       â”‚
â”‚                                                                   â”‚
â”‚  ðŸŸ¢ Live at: https://akilahapigateway-858627...run.app          â”‚
â”‚  ðŸ“Š Auto-scaling: 0-1000 instances                              â”‚
â”‚  ðŸ”’ Access: Public (unauthenticated)                            â”‚
â”‚  ðŸ“ Region: us-central1                                         â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Features Matrix

### GitHub Integration Features

| Feature Category | Endpoint | HTTP Method | Status | Description |
|-----------------|----------|-------------|--------|-------------|
| **Repository Management** |
| List Repositories | `/repos` | GET | âœ… Live | List all accessible repos (100/page) |
| Get Repo Details | `/repos/:owner/:repo` | GET | âœ… Live | Fetch repo metadata |
| Create Repository | `/repos/create` | POST | âœ… Live | Create new repo with privacy settings |
| **File Operations** |
| Read File | `/files/:owner/:repo/*` | GET | âœ… Live | Get file contents (base64 decoded) |
| Write/Update File | `/files/:owner/:repo/*` | PUT | âœ… Live | Create or update file with commit msg |
| Delete File | `/files/:owner/:repo/*` | DELETE | âœ… Live | Remove file from repository |
| **Issue Tracking** |
| List Issues | `/issues/:owner/:repo` | GET | âœ… Live | Get all open issues |
| Get Issue Details | `/issues/:owner/:repo/:num` | GET | âœ… Live | Fetch specific issue |
| Create Issue | `/issues/:owner/:repo/create` | POST | âœ… Live | Create new issue with title/body |
| **Workflow Management** |
| List Workflows | `/workflows/:owner/:repo` | GET | âœ… Live | Get all repository workflows |
| Trigger Workflow | `/workflows/:owner/:repo/:id/run` | POST | âœ… Live | Manual workflow dispatch |
| Cancel Workflow | `/workflows/:owner/:repo/runs/:id/cancel` | POST | âœ… Live | Cancel running workflow |
| **Secrets Management** |
| List Secrets | `/secrets/:owner/:repo` | GET | âœ… Live | Get secret names (not values) |
| Create/Update Secret | `/secrets/:owner/:repo/:name` | POST | âœ… Live | Encrypted secret storage (libsodium) |
| Delete Secret | `/secrets/:owner/:repo/:name` | DELETE | âœ… Live | Remove repository secret |
| **Gist Management** |
| List Gists | `/gists` | GET | âœ… Live | Get user's gists with metadata |
| Create Gist | `/gists/create` | POST | âœ… Live | Create public/private gist |
| Delete Gist | `/gists/:gist_id` | DELETE | âœ… Live | Remove specific gist |
| **Webhook Management** |
| List Webhooks | `/hooks/:owner/:repo` | GET | âœ… Live | Get repository webhooks |
| Create Webhook | `/hooks/:owner/:repo/create` | POST | âœ… Live | Add webhook with event subscriptions |
| Delete Webhook | `/hooks/:owner/:repo/:hook_id` | DELETE | âœ… Live | Remove webhook |
| **Deployment Management** |
| List Deployments | `/deploys/:owner/:repo` | GET | âœ… Live | Get 10 most recent deployments |
| Trigger Deployment | `/deploys/:owner/:repo` | POST | âœ… Live | Create new deployment |
| Get Deploy Status | `/deploys/:owner/:repo/:id/status` | GET | âœ… Live | Check deployment status |
| **Codespaces** |
| List Codespaces | `/codespaces` | GET | âœ… Live | Get active codespaces |
| Create Codespace | `/codespaces/create` | POST | âœ… Live | Launch new codespace from repo |

### Notion Integration Features

| Feature Category | Endpoint | HTTP Method | Status | Description |
|-----------------|----------|-------------|--------|-------------|
| **Page Management** |
| Get Workspace Overview | `/notion/get-overview` | GET | âœ… Live | List pages with block previews (10 blocks) |
| Create Page | `/notion/create-page` | POST | âœ… Live | Create new page with title and content |
| **Content Management** |
| Read Block | `/notion/read-block` | GET | âœ… Live | Retrieve specific block content |
| Append to Page | `/notion/append-to-page/:pageId` | POST | âœ… Live | Add new blocks to existing page |
| Edit Request | `/notion/edit-request` | POST | âœ… Live | Update existing block content |

### Firebase Integration Features

| Feature Category | Endpoint | HTTP Method | Status | Description |
|-----------------|----------|-------------|--------|-------------|
| **Logging** |
| Server Logger | `/firebase/logger` | POST | âœ… Live | Write timestamped logs to Realtime DB |
| **Notes** |
| Session Notes | `/firebase/notes` | POST | âœ… Live | Structured notes with metadata (tags, sentiment) |

### System Features

| Feature Category | Endpoint | HTTP Method | Status | Description |
|-----------------|----------|-------------|--------|-------------|
| **Health Checks** |
| Root Health Check | `/` | GET | âœ… Live | Server status ("Server is running.") |
| Ping/Trace | `/ping/trace` | GET | âœ… Live | Network diagnostics |
| GPT Test Endpoint | `/gpt` | POST | âœ… Live | Integration test endpoint |

---

## Technical Capabilities Matrix

| Capability | Implemented | In Progress | Planned | Notes |
|-----------|-------------|-------------|---------|-------|
| **Security** |
| API Key Authentication | âŒ | | âœ… | Critical for production |
| Rate Limiting | âŒ | | âœ… | Prevent abuse |
| Request Validation | ðŸŸ¡ | | | Basic validation in place |
| Secret Encryption | âœ… | | | libsodium for GitHub secrets |
| HTTPS/TLS | âœ… | | | Cloud Run default |
| **Performance** |
| Response Caching | âŒ | | âœ… | Reduce external API calls |
| Database Connection Pooling | N/A | | | Not using traditional DB |
| Request Compression | âœ… | | | Express default |
| CDN Integration | âŒ | | ðŸ”µ | Consider for static assets |
| **Monitoring** |
| Cloud Logging | âœ… | | | GCP native logging |
| Error Tracking | ðŸŸ¡ | | | Basic console.error |
| Performance Metrics | âŒ | | âœ… | APM integration needed |
| Uptime Monitoring | âŒ | | âœ… | External service recommended |
| **Testing** |
| Unit Tests | ðŸŸ¡ | | | Minimal coverage (~5%) |
| Integration Tests | âŒ | | âœ… | Critical for reliability |
| End-to-End Tests | âŒ | | ðŸ”µ | Nice to have |
| Load Testing | âŒ | | âœ… | Before scaling |
| **Documentation** |
| API Reference | ðŸŸ¡ | | | Inline in code, no formal docs |
| OpenAPI/Swagger | âŒ | | âœ… | Industry standard |
| Code Comments | ðŸŸ¡ | | | Partial coverage |
| Architecture Docs | âœ… | | | This document |
| **DevOps** |
| CI/CD Pipeline | âœ… | | | GitHub Actions fully automated |
| Infrastructure as Code | ðŸŸ¡ | | | Docker + workflow YAML |
| Automated Deployment | âœ… | | | On main branch push |
| Rollback Strategy | âŒ | | âœ… | Manual Cloud Run revert |
| **Scalability** |
| Auto-scaling | âœ… | | | Cloud Run native |
| Load Balancing | âœ… | | | Cloud Run native |
| Multi-region Deployment | âŒ | | ðŸ”µ | Currently single region |
| Database Sharding | N/A | | | Firebase auto-scales |

**Legend:**
- âœ… Implemented and working
- ðŸŸ¡ Partially implemented
- âŒ Not implemented
- ðŸ”µ Future consideration
- N/A Not applicable

---

## Data Flow Diagrams

### 1. GitHub Secret Creation Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Client  â”‚                â”‚ API Gateway  â”‚              â”‚   GitHub    â”‚
â”‚          â”‚                â”‚  (Cloud Run) â”‚              â”‚   API       â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
     â”‚                             â”‚                             â”‚
     â”‚ POST /secrets/:owner/       â”‚                             â”‚
     â”‚ :repo/:name                 â”‚                             â”‚
     â”‚ Body: { value: "secret" }   â”‚                             â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                             â”‚
     â”‚                             â”‚                             â”‚
     â”‚                             â”‚ GET /repos/:owner/:repo/    â”‚
     â”‚                             â”‚ actions/secrets/public-key  â”‚
     â”‚                             â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚                             â”‚                             â”‚
     â”‚                             â”‚ { key: "base64...",         â”‚
     â”‚                             â”‚   key_id: "123..." }        â”‚
     â”‚                             â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚                             â”‚                             â”‚
     â”‚                             â”‚ [Encrypt secret with        â”‚
     â”‚                             â”‚  libsodium using public key]â”‚
     â”‚                             â”‚                             â”‚
     â”‚                             â”‚ PUT /repos/:owner/:repo/    â”‚
     â”‚                             â”‚ actions/secrets/:name       â”‚
     â”‚                             â”‚ { encrypted_value, key_id } â”‚
     â”‚                             â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚                             â”‚                             â”‚
     â”‚                             â”‚ { status: 201 }             â”‚
     â”‚                             â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚                             â”‚                             â”‚
     â”‚ { status: "stored",         â”‚                             â”‚
     â”‚   name: "MY_SECRET" }       â”‚                             â”‚
     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                             â”‚
     â”‚                             â”‚                             â”‚
```

### 2. Notion Page Creation Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Client  â”‚                â”‚ API Gateway  â”‚              â”‚   Notion    â”‚
â”‚          â”‚                â”‚  (Cloud Run) â”‚              â”‚   API       â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
     â”‚                             â”‚                             â”‚
     â”‚ POST /notion/create-page    â”‚                             â”‚
     â”‚ { title: "My Page",         â”‚                             â”‚
     â”‚   content: "Hello world" }  â”‚                             â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                             â”‚
     â”‚                             â”‚                             â”‚
     â”‚                             â”‚ [Build Notion API payload]  â”‚
     â”‚                             â”‚                             â”‚
     â”‚                             â”‚ POST /v1/pages              â”‚
     â”‚                             â”‚ {                           â”‚
     â”‚                             â”‚   parent: { page_id },      â”‚
     â”‚                             â”‚   properties: { title },    â”‚
     â”‚                             â”‚   children: [blocks]        â”‚
     â”‚                             â”‚ }                           â”‚
     â”‚                             â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚                             â”‚                             â”‚
     â”‚                             â”‚ { id: "page-uuid",          â”‚
     â”‚                             â”‚   created_time: "..." }     â”‚
     â”‚                             â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚                             â”‚                             â”‚
     â”‚ { status: "created",        â”‚                             â”‚
     â”‚   pageId: "page-uuid" }     â”‚                             â”‚
     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                             â”‚
     â”‚                             â”‚                             â”‚
```

### 3. Firebase Logging Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Client  â”‚                â”‚ API Gateway  â”‚              â”‚  Firebase   â”‚
â”‚          â”‚                â”‚  (Cloud Run) â”‚              â”‚ Realtime DB â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
     â”‚                             â”‚                             â”‚
     â”‚ POST /firebase/logger       â”‚                             â”‚
     â”‚ { result: "Log message" }   â”‚                             â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                             â”‚
     â”‚                             â”‚                             â”‚
     â”‚                             â”‚ [Generate timestamp in EST] â”‚
     â”‚                             â”‚ timestamp = "2025-12-16_    â”‚
     â”‚                             â”‚             143022"         â”‚
     â”‚                             â”‚                             â”‚
     â”‚                             â”‚ PUT /0001currentsession/    â”‚
     â”‚                             â”‚ 99serverlogs/{timestamp}    â”‚
     â”‚                             â”‚ Value: "Log message"        â”‚
     â”‚                             â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚                             â”‚                             â”‚
     â”‚                             â”‚ { status: 200 }             â”‚
     â”‚                             â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚                             â”‚                             â”‚
     â”‚ { status: "logged",         â”‚                             â”‚
     â”‚   timestamp: "...",         â”‚                             â”‚
     â”‚   path: "..." }             â”‚                             â”‚
     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                             â”‚
     â”‚                             â”‚                             â”‚
```

---

## Session Management Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     SESSION LAYER                              â”‚
â”‚                    (src/session/)                              â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  buildCurrentSession.js                                  â”‚ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â”‚  â€¢ Fetches user data from Firebase                       â”‚ â”‚
â”‚  â”‚  â€¢ Fetches GitHub repository context                     â”‚ â”‚
â”‚  â”‚  â€¢ Fetches Notion workspace pages                        â”‚ â”‚
â”‚  â”‚  â€¢ Builds unified session object                         â”‚ â”‚
â”‚  â”‚  â€¢ Writes to currentSession.json (cache)                 â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                            â”‚                                   â”‚
â”‚                            â–¼                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  currentSession.json                                     â”‚ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â”‚  {                                                        â”‚ â”‚
â”‚  â”‚    "user": { ... },                                       â”‚ â”‚
â”‚  â”‚    "repos": [ ... ],                                      â”‚ â”‚
â”‚  â”‚    "notionPages": [ ... ],                                â”‚ â”‚
â”‚  â”‚    "timestamp": "2025-12-16T..."                          â”‚ â”‚
â”‚  â”‚  }                                                        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                            â”‚                                   â”‚
â”‚                            â–¼                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  index.js (Session Module Initializer)                  â”‚ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â”‚  â€¢ Exports session access methods                        â”‚ â”‚
â”‚  â”‚  â€¢ Provides session refresh triggers                     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                            â”‚                                   â”‚
â”‚                            â–¼                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  rebuild.js (Session Reset)                              â”‚ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â”‚  â€¢ Clears cached session data                            â”‚ â”‚
â”‚  â”‚  â€¢ Resets to default state                               â”‚ â”‚
â”‚  â”‚  â€¢ Used for testing or repo switching                    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Integration SDK Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      SDK CLIENTS                               â”‚
â”‚                     (src/sdk/)                                 â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  githubClient.js                                         â”‚ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â”‚  â€¢ Octokit REST client initialization                    â”‚ â”‚
â”‚  â”‚  â€¢ Authentication: GITHUB_PAT env variable               â”‚ â”‚
â”‚  â”‚  â€¢ Exports: getGitHubData() helper function              â”‚ â”‚
â”‚  â”‚  â€¢ Features:                                             â”‚ â”‚
â”‚  â”‚    - List branches                                       â”‚ â”‚
â”‚  â”‚    - List issues                                         â”‚ â”‚
â”‚  â”‚    - Repository metadata                                 â”‚ â”‚
â”‚  â”‚  â€¢ Security: DOMPurify for error message sanitization   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  notionClient.js                                         â”‚ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â”‚  â€¢ @notionhq/client SDK initialization                   â”‚ â”‚
â”‚  â”‚  â€¢ Authentication: NOTION_TOKEN env variable             â”‚ â”‚
â”‚  â”‚  â€¢ Exports: notion client instance                       â”‚ â”‚
â”‚  â”‚  â€¢ âš ï¸ SECURITY ISSUE: Token hardcoded in source          â”‚ â”‚
â”‚  â”‚    (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) â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  firebaseClient.js                                       â”‚ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â”‚  â€¢ firebase-admin SDK initialization                     â”‚ â”‚
â”‚  â”‚  â€¢ Service account authentication                        â”‚ â”‚
â”‚  â”‚  â€¢ Exports: Realtime Database reference                 â”‚ â”‚
â”‚  â”‚  â€¢ Features:                                             â”‚ â”‚
â”‚  â”‚    - Read/write to Firebase Realtime DB                 â”‚ â”‚
â”‚  â”‚    - Admin-level operations                             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Environment Configuration Map

### Required Environment Variables (37 total)

```yaml
# Google Cloud Platform (8 variables)
GCP_CLIENT_ID: OAuth client ID for GCP
GCP_CLIENT_SECRET: OAuth client secret
GCP_BROWSER_API_KEY: Browser-based API key
GCP_SERVICE_ACCOUNT_EMAIL: Service account email
GCP_COMPUTE_SERVICE_ACCOUNT: Compute engine service account
GCP_PROJECT_ID: Google Cloud project ID (akilahstack)
GCP_REGION: Deployment region (us-central1)

# Firebase (2 variables)
FIREBASE_DATABASE_URL: Realtime Database URL
FIREBASE_STORAGE_BUCKET: Cloud Storage bucket

# GitHub (5 variables)
GITHUB_CLIENT_ID: GitHub OAuth app client ID
GITHUB_CLIENT_SECRET: GitHub OAuth app secret
GITHUB_OAUTH_CLIENT_ID: GitHub OAuth (alternative app)
GITHUB_OAUTH_CLIENT_SECRET: OAuth secret
GITHUB_FINE_GRAINED_PAT: Fine-grained personal access token
GITHUB_PAT: Personal access token (legacy)

# LinkedIn (4 variables)
LINKEDIN_AUTH_URL: OAuth redirect URL
LINKEDIN_CLIENT_ID: LinkedIn app client ID
LINKEDIN_CLIENT_SECRET: LinkedIn app secret
LINKEDIN_SADI_PROFILE_PAT: Profile access token

# AWS (4 variables)
AWS_ACCESS_KEY_ID: AWS IAM access key
AWS_SECRET_ACCESS_KEY: AWS IAM secret key
AWS_AMPLIFY_KEY: Amplify service key
AWS_AMPLIFY_SECRET: Amplify service secret

# Notion (4 variables)
NOTION_CLIENT_ID: Notion OAuth app ID
NOTION_CLIENT_SECRET: Notion OAuth secret
NOTION_WORKSPACE_ID: Workspace identifier
NOTION_INTERNAL_INTEGRATION_SECRET: Internal integration token
NOTION_TOKEN: API access token (used by SDK)

# Application (varies)
PORT: Server port (default: 8080)
NODE_ENV: Environment (development/production)
```

---

## Security Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SECURITY LAYERS                             â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  LAYER 1: Network Security                               â”‚ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â”‚  âœ… HTTPS/TLS encryption (Cloud Run enforced)            â”‚ â”‚
â”‚  â”‚  âŒ No API key authentication (PUBLIC ACCESS)            â”‚ â”‚
â”‚  â”‚  âŒ No rate limiting (abuse vulnerability)               â”‚ â”‚
â”‚  â”‚  âŒ No IP allowlisting                                   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                            â”‚                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  LAYER 2: Application Security                           â”‚ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â”‚  ðŸŸ¡ Input validation (basic JSON parsing)                â”‚ â”‚
â”‚  â”‚  âŒ No XSS protection middleware                         â”‚ â”‚
â”‚  â”‚  âŒ No CSRF protection                                   â”‚ â”‚
â”‚  â”‚  âŒ No SQL injection protection (not using SQL)          â”‚ â”‚
â”‚  â”‚  ðŸŸ¡ Error handling (try-catch, but exposes stack traces) â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                            â”‚                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  LAYER 3: Secrets Management                             â”‚ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â”‚  âœ… Environment variables for credentials                â”‚ â”‚
â”‚  â”‚  âœ… GitHub Secrets encryption (libsodium)                â”‚ â”‚
â”‚  â”‚  âš ï¸  Hardcoded tokens in source code (CRITICAL ISSUE)    â”‚ â”‚
â”‚  â”‚  âŒ No secrets rotation strategy                         â”‚ â”‚
â”‚  â”‚  âŒ No credential vault integration                      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                            â”‚                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  LAYER 4: External Service Security                      â”‚ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â”‚  âœ… GitHub PAT with scoped permissions                   â”‚ â”‚
â”‚  â”‚  âœ… Firebase service account authentication              â”‚ â”‚
â”‚  â”‚  âœ… Notion internal integration                          â”‚ â”‚
â”‚  â”‚  âŒ No webhook signature verification                    â”‚ â”‚
â”‚  â”‚  âŒ No OAuth token refresh implementation                â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                            â”‚                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  LAYER 5: Infrastructure Security                        â”‚ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â”‚  âœ… GCP service account with minimal roles               â”‚ â”‚
â”‚  â”‚  âœ… Container security (official Node.js image)          â”‚ â”‚
â”‚  â”‚  âŒ No vulnerability scanning in CI/CD                   â”‚ â”‚
â”‚  â”‚  âŒ No dependency security audits                        â”‚ â”‚
â”‚  â”‚  âœ… Private container registry (gcr.io)                  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Critical Security Issues to Address

1. **IMMEDIATE (P0):**
   - Remove hardcoded Notion token from `src/sdk/notionClient.js`
   - Implement API key authentication for all routes
   - Add rate limiting (100 req/hour per IP recommended)

2. **HIGH PRIORITY (P1):**
   - Implement request validation middleware
   - Add comprehensive error handling (no stack trace exposure)
   - Set up automated dependency vulnerability scanning

3. **MEDIUM PRIORITY (P2):**
   - Implement webhook signature verification
   - Add request/response logging for audit trail
   - Set up secrets rotation schedule

---

## Scalability Considerations

### Current Architecture Limits

| Resource | Current | Recommended | Max Capacity |
|----------|---------|-------------|--------------|
| Cloud Run Instances | 0-1000 | 0-100 (cost control) | 1000 |
| Concurrent Requests/Instance | 80 | 80 | 80 |
| Memory per Instance | 512MB (default) | 1GB | 4GB |
| CPU per Instance | 1 vCPU | 1 vCPU | 2 vCPU |
| Request Timeout | 300s (default) | 60s | 3600s |
| Cold Start Time | ~2-3s | <1s (keep warm) | N/A |

### Bottleneck Analysis

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    POTENTIAL BOTTLENECKS                       â”‚
â”‚                                                                 â”‚
â”‚  1. GitHub API Rate Limits                                     â”‚
â”‚     â€¢ 5,000 requests/hour (authenticated)                      â”‚
â”‚     â€¢ Solution: Implement caching layer (Redis)                â”‚
â”‚     â€¢ Solution: Request queuing for batch operations           â”‚
â”‚                                                                 â”‚
â”‚  2. Notion API Rate Limits                                     â”‚
â”‚     â€¢ 3 requests/second (rate limited)                         â”‚
â”‚     â€¢ Solution: Request throttling middleware                  â”‚
â”‚     â€¢ Solution: Batch operations where possible                â”‚
â”‚                                                                 â”‚
â”‚  3. Firebase Realtime DB                                       â”‚
â”‚     â€¢ Concurrent connections: 100,000                          â”‚
â”‚     â€¢ Bandwidth: 10 GB/month (free tier)                       â”‚
â”‚     â€¢ Solution: Migrate to Firestore for scale                 â”‚
â”‚                                                                 â”‚
â”‚  4. Cold Start Latency                                         â”‚
â”‚     â€¢ ~2-3 seconds for first request                           â”‚
â”‚     â€¢ Solution: Keep minimum 1 instance warm                   â”‚
â”‚     â€¢ Cost: ~$5-10/month                                       â”‚
â”‚                                                                 â”‚
â”‚  5. No Caching Layer                                           â”‚
â”‚     â€¢ Every request hits external APIs                         â”‚
â”‚     â€¢ Solution: Redis/Memcached for 5-15 min TTL               â”‚
â”‚     â€¢ Estimated savings: 60-80% reduction in API calls         â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Deployment Checklist

### Pre-Production Checklist

- [x] Docker container builds successfully
- [x] Environment variables configured
- [x] GitHub Actions workflows tested
- [x] Cloud Run service deployed
- [x] HTTPS endpoint accessible
- [ ] API authentication implemented
- [ ] Rate limiting configured
- [ ] Monitoring and alerting set up
- [ ] Error tracking integrated
- [ ] Load testing performed
- [ ] Security audit completed
- [ ] Documentation published
- [ ] Backup and recovery tested

### Production-Ready Checklist

- [ ] Remove all hardcoded secrets
- [ ] Implement comprehensive error handling
- [ ] Add request validation middleware
- [ ] Set up monitoring dashboard
- [ ] Configure log aggregation
- [ ] Implement automated testing (80%+ coverage)
- [ ] Create incident response plan
- [ ] Set up on-call rotation
- [ ] Document API with OpenAPI spec
- [ ] Create developer onboarding guide
- [ ] Establish SLA commitments
- [ ] Implement graceful degradation
- [ ] Set up status page
- [ ] Configure automated backups
- [ ] Test disaster recovery procedures

---

**Document Version:** 1.0  
**Maintained by:** Project technical team  
**Last Review:** December 16, 2025  
**Next Review:** Upon major architectural changes
